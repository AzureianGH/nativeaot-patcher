<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <ItemGroup>
    <IlcArg Include="--targetos:linux"/>
  </ItemGroup>

  <Target Name="GetLinker">
    <Exec Command="where ld.lld" IgnoreExitCode="true" StandardOutputImportance="Low" ConsoleToMsBuild="true"
          Condition="$(LdLinkerPath) ==''">      <!-- Ignore error code for now. We will make the build error out later  -->
      <Output TaskParameter="ConsoleOutput" PropertyName="LdLinkerPath" />
    </Exec>
  </Target>

  <Target Name="GetXorriso" BeforeTargets="BuildISO">
    <Exec Command="git clone https://github.com/PeyTy/xorriso-exe-for-windows.git --depth=1 $(CosmosIntermediateOutputPath)/xorriso" IgnoreExitCode="true"/>
    <PropertyGroup>
      <XorrisoBinary>$([MSBuild]::NormalizePath('$(CosmosIntermediateOutputPath)/xorriso/xorriso.exe'))</XorrisoBinary>
      <FinalIsoRoot Condition="'$(FinalIsoRoot)' == ''">cygdrive/c/$(IsoRoot)</FinalIsoRoot>
    </PropertyGroup>
  </Target>

</Project>
